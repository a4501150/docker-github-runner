#!/bin/bash
set -e

# Lint Dockerfile with hadolint
if [ -f Dockerfile ]; then
    if command -v hadolint &>/dev/null; then
        echo "Running hadolint..."
        hadolint Dockerfile
    elif command -v docker &>/dev/null; then
        echo "Running hadolint via Docker..."
        docker run --rm -i hadolint/hadolint < Dockerfile
    else
        echo "Warning: hadolint not found (install or use Docker). Skipping Dockerfile lint."
    fi
fi
